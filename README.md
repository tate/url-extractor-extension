# URL Link Extractor Chrome拡張機能

現在表示中のWebページから全てのURLリンクを抽出し、クリップボードにコピーできるChrome拡張機能です。

## 機能

- **リンク自動抽出**: 現在のWebページにある全てのaタグのリンクを自動で検出
- **クリップボードコピー**: 抽出したURLを改行区切りでクリップボードにコピー
- **複数形式対応**: URLのみ、テキスト+URL、Markdown形式での出力に対応
- **重複除去**: 同じURLの重複を自動で除去
- **詳細情報**: リンクテキスト、URL、ドメイン、外部リンク判定など
- **フィルタリング**: JavaScriptリンクやメールリンクなどを自動除外

## インストール方法

1. Chromeブラウザで `chrome://extensions/` を開く
2. 右上の「デベロッパーモード」を有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. この拡張機能のフォルダ（url-extractor-extension）を選択

## 使用方法

1. 任意のWebページを開く
2. Chrome拡張機能アイコンをクリック（ツールバーの🔗アイコン）
3. ポップアップが開き、自動でリンクが抽出される
4. コピー形式を選択
5. 「📋 クリップボードにコピー」ボタンをクリック（メインアクション）
6. 必要に応じて「リンクを再度抽出」で更新
7. 任意の場所にペースト（Ctrl+V）

## コピー形式

### URLのみ
```
https://www.google.com
https://github.com
https://stackoverflow.com
```

### リンクテキスト + URL
```
Google - https://www.google.com
GitHub - https://github.com
Stack Overflow - https://stackoverflow.com
```

### Markdown形式
```
[Google](https://www.google.com)
[GitHub](https://github.com)
[Stack Overflow](https://stackoverflow.com)
```

## 技術仕様

- **Manifest Version**: 3
- **必要な権限**: activeTab、scripting（自動コンテンツスクリプト注入用）
- **対応URL**: 全てのWebページ（<all_urls>）
- **クリップボードAPI**: 最新のnavigator.clipboard.writeText()を使用
- **エラーハンドリング**: 自動再試行、タイムアウト機能付き

## ファイル構成

```
url-extractor-extension/
├── manifest.json      # 拡張機能の設定ファイル
├── popup.html        # ポップアップUI
├── popup.js          # ポップアップの動作（クリップボード機能）
├── content.js        # Webページでのリンク抽出
├── background.js     # バックグラウンド処理
└── README.md         # この説明ファイル
```

## 使用例

**Web開発者向け**
- サイト内のリンク構造を確認
- 外部リンクの一覧作成
- SEO監査用のリンク収集

**研究・調査用途**
- 参考文献のURL収集
- リンク集の作成
- 競合サイト分析

**一般ユーザー向け**
- 後で読みたいリンクの保存
- ブックマーク作成の効率化

## 注意事項

- 一部のWebサイトでは、セキュリティポリシーによりリンク抽出ができない場合があります
- 動的に生成されるリンクは、ページ読み込み完了時点のもののみ抽出されます
- 大量のリンクがあるページでは、処理に時間がかかる場合があります
- クリップボードへのアクセスには、ブラウザの許可が必要です

## トラブルシューティング

**リンクが抽出されない場合**
- ページを再読み込みしてから再試行
- 他のページで動作確認
- ブラウザのデベロッパーツール（F12）でエラーメッセージを確認

**「エラー」と表示される場合（最もよくある問題）**
- **コンテンツスクリプトの読み込みタイミング問題**: ページを再読み込みしてから再試行
- **CSP（コンテンツセキュリティポリシー）制限**: 一部のサイトでは拡張機能の実行が制限されています
- **特殊なページ**: chrome://、chrome-extension://などのページでは動作しません
- **動的コンテンツ**: SPA（Single Page Application）や非同期読み込みのサイトではタイミングが重要
- **拡張機能の権限エラー**: 拡張機能を一度無効化→有効化して再試行

**改善されたエラー処理（新版の機能）**
- 自動的にコンテンツスクリプトを再注入
- タイムアウト機能付きでより安定した通信
- 詳細なエラーログとユーザーフィードバック
- DOM読み込み状態の自動チェック

**クリップボードにコピーできない場合**
- ブラウザのクリップボード権限を確認
- HTTPSページで使用（一部の機能はHTTPSが必要）
- 別のブラウザタブで試行
- ブラウザの設定でクリップボードアクセスが許可されているか確認

**大量のリンクをコピーする場合**
- ブラウザのメモリ使用量を確認
- 分割してコピーすることを検討
- 一度に1000個以上のリンクがある場合は処理に時間がかかる場合があります

## 開発者情報

この拡張機能はChrome Extension Manifest V3で開発されています。
- セキュリティを重視した最小限の権限設定
- 最新のClipboard APIを使用
- フォールバック機能で古いブラウザにも対応

カスタマイズや機能追加が必要な場合は、各JavaScriptファイルを編集してください。